<!DOCTYPE html>
<html>
<head>
    <link href="https://fonts.googleapis.com/css?family=Montserrat:700" rel="stylesheet">
<style>
body{
  background-color:white;
  font-family: 'Montserrat', sans-serif;
  margin: 0;
  padding: 0;
  height: 100%;
  overflow: hidden;
}
#text{
  font-size: 60px;
  margin-top: 70px;
  text-align: center;
}
#img{
display: block;
  margin-right: auto;
  margin-left: auto;
  margin-top: 210px;
  transition: all 500ms;
  user-drag: none;
  user-select: none;
  -moz-user-select: none;
  -webkit-user-drag: none;
  -webkit-user-select: none;
  -ms-user-select: none;
}
</style>
</head>
<body>
<img id='img'>
<div id='text'></div>
<audio id='audio' autoplay loop></audio>
	<script src="/javascripts/konami.js"></script>
<script>
// V A R I A B L E S
var timesVisited = 1+Number(localStorage.getItem("dogRolled"));
var currentTitle,
    currentState,
    d=document,
    imageElement = d.getElementById('img'),
    audioElement = d.getElementById('audio'),
    textElement = d.getElementById('text');
localStorage.setItem("dogRolled", timesVisited);
setTimeout(function(){if(localStorage.getItem('konamiSans')){
  new Konami(function(){localStorage.setItem('sansSpecial',1);
  console.log('You feel your sins crawling down your back. Or was that walking?');});
}else{
  new Konami(function(){location='/dogtrolld';});
}},5000);
// F U N C T I O N S
function setTimesVisited(srting){
  localStorage.setItem('dogRolled',srting);
}
function setText(string){
	textElement.innerHTML=string;
}
function getRandomNumber(n){
    return Math.floor((Math.random() * n) + 1);
}
function trueReset() {
   var r = ['dogRolled','dogTrolld','dogTold', 'devTools', 'devTold', 'sansSpecial', 'konamiSans'];
   r.forEach(localStorage.removeItem, localStorage);
}
window.trueReset = trueReset;

// S T A T E
var danceOfDog = {
    music:function(){
	    console.log('The function called');
			switch(getRandomNumber(9)){
			    case 1:
              			console.log('Dance o Dog');
			        audioElement.src='/dogrolld/resources/Dance of Dog.ogg';
			    break;
			    case 2:
              			console.log('Dance o Dog 2');
			        audioElement.src="/dogrolld/resources/Dance of Dog1.ogg";
			    break;
			    case 3:
              			console.log('Dance o Dog 0.5');
			        audioElement.src="/dogrolld/resources/Dance of Dog5.ogg";
			    break;
			    case 4:
			    case 5:
			    case 6:
					case 7:
					case 8:
				console.log('Dog Song');
			        audioElement.src='/dogrolld/resources/Dogsong.ogg';
							audioElement.playbackRate=Math.random()+0.6;
			}
		},
    image:function(){imageElement.src='/dogrolld/resources/Annoying-Dog.gif';},
	  txt:function(){setText(timesVisited);},
		plugin:function(){},
};


// S A N S
// F I N I S H E D
var sans = {
	music:function(){
		if(!localStorage.getItem('sansSpecial')){
			audioElement.src='/dogrolld/resources/Sans.ogg';
		}else{
			audioElement.src=(getRandomNumber(7)<3?'/dogrolld/resources/Megalovania.ogg':'/dogrolld/resources/SongThatMightPlayWhenYouFightSans.ogg');
      }
	},
	image:function(){
		imageElement.src='/dogrolld/resources/Sans.png';
	},
	txt:function(){
    setText(timesVisited);
    if (localStorage.getItem('devTold')) {
      localStorage.setItem('konamiSans', 1);
    }
    if(timesVisited!=12){
		if(localStorage.getItem('devTools')&&!localStorage.getItem('devTold')){
      setText('Hey Kid....');
			setTimeout(function(){setText('I see you were messing with the dev tools. . .');},5000);
			setTimeout(function(){setText("Try entering: \" location='/dogtrolld'; \"");},9000);
			setTimeout(function(){setText('You might find some eggs, even though it\'s not easter.');},15000);
		  setTimeout(function(){setText('Let\'s play a game. . .');},18000);
		  setTimeout(function(){setText('"Z" is [okay] "X" is [back]. Use the arrow keys to move.');},23000);
			setTimeout(function(){setText('Select normal when you are ready.');
			localStorage.setItem('devTold','true');
      window.location='https://jcw87.github.io/c2-sans-fight/';},27000);
		} else if(localStorage.getItem('dogTrolld')){
        if(!localStorage.getItem('dogTold')){
        setText('Heh.');
        setTimeout(function(){setText('I see you got ricked...');},3000);
        setTimeout(function(){setText('Welp, here\'s to another one!');
        localStorage.setItem('dogTold',1);
        window.location='/dogtrolld';},6000);
      }
    }
  }else{
    setText('Sorry, elven is the limit for page reloads');
    // EKCS DEE ^--^
    setTimeout(function(){setText('Do you really think that I can count that high on my fingers?');},50000);
    setTimeout(function(){location.reload();},10000);
    localStorage.removeItem('dogRolled');
  }
  }
};


var Asriel = {
	music:function(){
    audioElement.src='/dogrolld/resources/Menu.ogg';
  },
	image:function(){
    imageElement.src='/dogrolld/resources/AsrielDreemur.gif';
    d.body.style.backgroundColor='black';
  },
	txt:function(){},
  };

var Default= {
  music:function(){},
  image:function(){},
  txt:function(){}
};

var Devroom = {
	music:function(){
    var id = window.setTimeout(function() {}, 0);
    while (id--){
    window.clearTimeout(id);
    }
    audioElement.playbackRate=Math.random()+0.6;
    audioElement.src='/dogrolld/resources/Dogroom.ogg';},
	image:function(){imageElement.src='/dogrolld/resources/Devroom.png';
  d.body.style.backgroundColor='black';
  },
	txt:function(){textElement.hidden=true;
    //Yes, I know it's not text
  	localStorage.setItem('devTools','true');
  },
};


/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */
/*
'The domain rick.amigocraft.net has expired RIP(Rick In People). This renders dogtrolld useless.
Marcus and Cole are working though. Dogtrolld will exist once more!'
if(getRandomNumber(7)==4){window.history.pushState({},"",'/dogtrolld');}
*/
//Website Code
(function stateDeterminer(){
	switch (timesVisited) {
		case 1:
		case 2:
		case 3:
		case 4:
		case 5:
		case 6:
		case 7:
		  currentState=danceOfDog;
		break;
		case 8:
		case 9:
		case 10:
		case 11:
    case 12:
    currentState=sans;
    break;
		default:
		  currentState=Asriel;
	}
})();
function stateWriter(state){
	state.music();
  state.image();
	state.txt();
  currentState=state;
}
stateWriter(currentState);
window.currentState = currentState;
var changeTitleInterval = setInterval(function titleChanger(){
  if(currentTitle){d.title='Rekt';currentTitle=0;}else{d.title='Get';currentTitle=1;}
},500);
window.timesVisited = timesVisited;

// D E V T O O L S  L I S T E N E R

var element=new Image();Object.defineProperty(element,"id",{get:function(){
  if(currentState!=Devroom){stateWriter(Devroom);}
}});console.log("%cIan Colgan",element);
	</script>
</body>
</html>
